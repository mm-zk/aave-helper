# How to launch AAVE

You'll need:
* this repo (for helpers)
* https://github.com/safe-global/safe-singleton-factory
* https://github.com/mm-zk/aave-v3-origin
* https://github.com/mm-zk/aave-interface

in the ones above, use the `mmzk_1222_aave_local_run` branch.

## Start your chain 

use anvil or geth or any other binary to start EVM compatible node.


## Safe singleton 

1. Get Safe singleton factory deployed on your chain:

  // https://github.com/safe-global/safe-singleton-factory


you can check if it is deployed by calling


```
cast code 0x914d7Fec6aaC8cd542e72Bca78B30650d45643d7
```



### Safe singleton deployment.

Transfer some assets to the deployer address (always the same one):

```
cast send -r http://localhost:8545 0xe1cb04a0fa36ddd16a06ea828007e35e1a3cbc37 --value 1ether --private-key 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
```

Then run:

```
npm run submit
```

This will work only, if they created a signed transaction with your chain id in the past.

For testing - just set your chain id to 31337.

## Deploying helper contracts

From the helpers (using 'slow' for zkos-test-node for now):

```
forge script script/Counter.s.sol:CounterScript --rpc-url http://localhost:8545 --private-key 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80 --broadcast --slow
```



## Deploying aave backend:

Change DefaultMarketInput and  DeployAAveV2MarketBatchedBase.sol - to set the address of the 'counter' helper tha t you deployed above.
Look for // CHANGEHERE comments.

```
forge script scripts/DeployAaveV3MarketBatched.sol --rpc-url http://localhost:8545 --private-key 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80 --broadcast --slow -g 400
```

## Deploying AAVE frontend:

in 'interface' repo:

cp .env.example .env.local
change NEXT_PUBLIC_ENV to 'staging'

Change marketsConfig.tsx file - look for CHANGEHERE
Use the values from reports/XXX.json - that were generated by the forge script above.


And then 'localhost:3000'

Make sure to select 'ZKOS Market' - that's the entry that we're playing with - and you should see 'Other' and 'TheOne'.

cast send 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512 "mint(address,uint256)" 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 1500000000000000000   --private-key  0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80 --legacy --gas-limit 1000000000

